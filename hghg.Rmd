---
title: "Untitled"
author: "LeonieThomas"
date: "10 Juli 2019"
output: html_document
---

---
title: "LoadData"
author: "LeonieThomas"
date: "26 April 2019"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
data = readRDS("C:/Users/LeoTh/Documents/GitHub/project-01-group-02- gesamte Daten/DepMap19Q1_allData.RDS")

```

Additionally to the mutation matrix we want another matrix only containing the data which is not the mutation matrix.
We define which data should be excluded
```{r}
'%!in%' <- function(x,y)!('%in%'(x,y)) 
dt_new <- lapply(which(names(data) %!in% "mutation"), function(a) data[[a]]) 
names(dt_new) <- names(data)[which(names(data) %!in% "mutation")] 
```

defining the samples so we can extract only our cancer type of interest
```{r}
sample_case = c("Skin Cancer") 
``` 

We look at the annotation matrix an search only for the Primary diseases which match the previous defined sample case (Skin cancer) 
```{r}
samples = data$annotation$DepMap_ID[which(data$annotation$Primary.Disease == sample_case)]
```

extracting only the celllines with skin cancer as the primary disease from our matrices (dt_new) and save the new matrices in a new large list (processed_data)
```{r}
processed_data <- lapply(1:length(dt_new), function(a) {  
  dat_picker <- dt_new[[a]]  
  output <- dat_picker[,which(colnames(dat_picker) %in% samples)]
  output <- output[complete.cases(output),]
  output <- output[order(rownames(output)),]
  return(output)
})
names(processed_data) <- names(dt_new)

processed_data$annotation <- data$annotation[which(data$annotation$DepMap_ID %in% samples),]
```

